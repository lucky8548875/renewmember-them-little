{"remainingRequest":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/src/views/child-views/admin-bookings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/src/views/child-views/admin-bookings.vue","mtime":1551430260038},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from \"axios\";\nimport Modal from \"@/components/reusable/modal.vue\";\nimport Switcher from \"@/components/reusable/switcher.vue\";\nexport default {\n\tcomponents: {\n\t\tmodal: Modal,\n\t\tswitcher: Switcher\n\t},\n\tmounted() {\n\t\tthis.$store.dispatch(\"getAllBookings\");\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tactive: \"all\",\n\t\t\treschedule_date: \"\",\n\t\t\treschedule_slot: \"\",\n\t\t\treschedule_slots: []\n\t\t};\n\t},\n\twatch: {\n\t\treschedule_date() {\n\t\t\tvar formData = new FormData();\n\t\t\tformData.append(\"booking_date\", this.reschedule_date);\n\t\t\tconsole.log(this.$refs.booking.params.package);\n\t\t\tformData.append(\n\t\t\t\t\"package_minutes\",\n\t\t\t\tJSON.parse(this.$refs.booking.params.package).package_minutes\n\t\t\t);\n\t\t\taxios\n\t\t\t\t.post(`/_system/php/api/booking/getOpenSlots.php`, formData)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.success) {\n\t\t\t\t\t\tthis.reschedule_slots = response.data.data;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error(response);\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\treturn [];\n\t\t\t\t});\n\t\t}\n\t},\n\tmethods: {\n    catchParse(thing) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(thing.replace(/\\n/g, \"<br>\"));\n\t\t\t} catch {\n\t\t\t\tconsole.error(\"catchParse: Error - can't parse \" + thing);\n\t\t\t}\n\t\t},\n\t\treschedule() {\n\t\t\tvar formData = new FormData();\n\t\t\tformData.append(\"booking_id\", this.$refs.booking.params.booking_id);\n\t\t\tformData.append(\"booking_date\", this.reschedule_date);\n\t\t\tformData.append(\"booking_time\", this.reschedule_slot);\n\t\t\taxios\n\t\t\t\t.post(`/_system/php/api/booking/reschedule.php`, formData)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.success) {\n\t\t\t\t\t\tthis.$store.dispatch(\"getAllBookings\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error(response);\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\treturn [];\n\t\t\t\t});\n\t\t}\n\t},\n\tcomputed: {\n\t\tfilteredBookings() {\n\t\t\tvar bookings = this.$store.getters.allBookings;\n\t\t\tif (this.active == \"all\") {\n\t\t\t\treturn bookings;\n\t\t\t} else if (this.active == \"paid\") {\n\t\t\t\treturn bookings.filter(\n\t\t\t\t\tbooking => booking.booking_status == \"AWAITING_CONFIRMATION\"\n\t\t\t\t);\n\t\t\t} else if (this.active == \"overdue\") {\n\t\t\t\treturn bookings.filter(function(booking) {\n\t\t\t\t\tif (booking.booking_status != \"AWAITING_PAYMENT\") {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tvar created = new Date(booking.booking_created);\n\t\t\t\t\tvar now = new Date();\n\t\t\t\t\tvar milihours = now - created;\n\t\t\t\t\tvar hour = milihours / 3.6e6;\n\t\t\t\t\treturn hour > 24;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n};\n",null]}