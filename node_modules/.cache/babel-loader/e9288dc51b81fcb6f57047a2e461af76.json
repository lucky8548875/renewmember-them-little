{"remainingRequest":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/babel-loader/lib/index.js!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/src/views/child-views/dashboard-bookings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/src/views/child-views/dashboard-bookings.vue","mtime":1547269893551},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Modal from '@/components/reusable/modal.vue';\nexport default {\n  components: {\n    'modal': Modal\n  },\n\n  created() {\n    this.$store.dispatch('getUserBookings', this.$store.getters.userId);\n    this.$store.dispatch('loadThemes');\n    this.$store.dispatch('loadAddons');\n  },\n\n  methods: {\n    submitPayment(booking_id) {\n      console.log('Called Submit Payment');\n      console.log('imageurl:' + this.imageUrl);\n      var formdata = new FormData();\n      formdata.append('booking_id', booking_id);\n      formdata.append('deposit_slip', this.imageUrl);\n      this.$store.dispatch('submitPayment', formdata);\n    },\n\n    getTotalPrice(params) {\n      var array = JSON.parse(params).filter(addon => addon.addon_source != 'BOOKING' && addon.addon_source != 'PACKAGE').map(addon => addon.addon_price);\n      var x = 0;\n      array.forEach(element => {\n        x += element;\n      });\n      return x;\n    }\n\n  },\n  computed: {\n    imageUrl() {\n      try {\n        return this.$refs.booking.$refs.fileupload.imageUrl;\n      } catch (_unused) {\n        return \"\";\n      }\n    }\n\n  }\n};",{"version":3,"sources":["dashboard-bookings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA,OAAA,KAAA,MAAA,iCAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,aAAA;AADA,GADA;;AAKA,EAAA,OAAA,GAAA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,iBAAA,EAAA,KAAA,MAAA,CAAA,OAAA,CAAA,MAAA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,YAAA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,YAAA;AACA,GATA;;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,aAAA,CAAA,UAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,uBAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,cAAA,KAAA,QAAA;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,YAAA,EAAA,UAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,cAAA,EAAA,KAAA,QAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,QAAA;AACA,KARA;;AASA,IAAA,aAAA,CAAA,MAAA,EAAA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,MAAA,EAAA,MAAA,CAAA,KAAA,IAAA,KAAA,CAAA,YAAA,IAAA,SAAA,IAAA,KAAA,CAAA,YAAA,IAAA,SAAA,EAAA,GAAA,CAAA,KAAA,IAAA,KAAA,CAAA,WAAA,CAAA;AACA,UAAA,CAAA,GAAA,CAAA;AACA,MAAA,KAAA,CAAA,OAAA,CAAA,OAAA,IAAA;AACA,QAAA,CAAA,IAAA,OAAA;AACA,OAFA;AAGA,aAAA,CAAA;AACA;;AAhBA,GAVA;AA4BA,EAAA,QAAA,EAAA;AACA,IAAA,QAAA,GAAA;AACA,UAAA;AACA,eAAA,KAAA,KAAA,CAAA,OAAA,CAAA,KAAA,CAAA,UAAA,CAAA,QAAA;AACA,OAFA,CAGA,gBAAA;AACA,eAAA,EAAA;AACA;AACA;;AARA;AA5BA,CAAA","sourcesContent":["<template lang=\"pug\">\ndiv\n  .padding-large(style=\"height: 100%\")\n    div.flex.justify-space-between.align-center\n      h2 My Bookings\n      button.primary.padding(@click=\"$router.push('/book')\")\n        fa(icon=\"plus\")\n        span.margin-left-small New Booking\n    div.margin-y\n    \n      div.card.padding.flex.justify-space-between.align-center.margin-bottom-small(v-for=\"booking in $store.getters.myBookings\")\n        div.flex\n          div\n            h5 DATE\n            br\n            span {{booking.booking_date}}\n          div.margin-left-large\n            h5 STATUS\n            br\n            transition(name=\"switch-up\" mode=\"out-in\")\n              span(:key=\"booking.booking_status\") {{booking.booking_status}}\n        div\n          button(@click=`$refs.booking.show(booking)`) View\n          button.margin-left-small.primary(@click=`$refs.orderPrints.show(booking)` v-if=\"booking.booking_status=='COMPLETED'\") Order Prints\n\n  modal(ref=\"booking\" inline-template)\n    form(@submit.prevent=\"\")\n      transition(name='fade' appear)\n        #backdrop.fixed-fill(@click=\"toggle\" v-show=\"visible\")\n      transition(name='center-scale' appear)\n        #modal(v-show=\"visible\").card.fixed-center.flex.column.five-large.seven-medium.twelve-small.max-high\n          div.flex.justify-space-between.align-center.wide\n            h2.padding Booking Details\n            a.padding(@click=\"toggle\"): fa(icon='times')\n          hr\n          div.padding.overflow-auto\n            table.wide\n              tr\n                td Schedule\n                td {{params.booking_date}}\n              tr\n                td Status\n                td {{params.booking_status}}\n              tr\n                td Total Price\n                td {{params.booking_total_price}}\n              tr\n                td Payment Slip\n                td\n                  fileupload(ref=\"fileupload\" v-if=\"params.booking_status=='AWAITING_PAYMENT'\")\n                  img(:src=\"params.booking_deposit_slip\" v-else)\n            form()\n                fieldset\n                  details\n                    summary Themes\n                    br\n                    .grid.grid-auto\n                      img(v-for=\"themeid in JSON.parse(params.booking_themes)\" :src=\"$store.getters.themes.find(theme => theme.theme_id == themeid).theme_image\" style=\"width: 100%; border-radius: 0.5rem\")\n            form()\n                fieldset\n                  details\n                    summary Package Details\n                    br\n                    table.wide\n                      tr\n                        td Package Name\n                        td {{ JSON.parse(params.package).package_name }}\n                      tr\n                        td Package Description\n                        td {{ JSON.parse(params.package)['package_description'] }}\n                      tr\n                        td Duration\n                        td {{ JSON.parse(params.package)['package_minutes'] }}\n                      tr\n                        td Addons\n                        td\n                          ul\n                            li(v-for=\"addon in JSON.parse(params.booking_addons)\")\n                              span {{addon.addon_type}} : {{addon.addon_description}} (P {{addon.addon_price}})\n    \n            br\n            div.flex\n              button.flex-grow(type=\"submit\" v-if=\"params.booking_status=='AWAITING_PAYMENT'\" @click=\"$parent.submitPayment(params.booking_id); visible=false\") Submit Payment\n\n  modal(ref=\"orderPrints\" inline-template)\n    form(@submit.prevent=\"\")\n      transition(name='fade' appear)\n        #backdrop.fixed-fill(@click=\"toggle\" v-show=\"visible\")\n      transition(name='center-scale' appear)\n        #modal(v-show=\"visible\").card.fixed-center.flex.column.five-large.seven-medium.twelve-small.max-high\n          div.flex.justify-space-between.align-center.wide\n            h2.padding Order Prints\n            a.padding(@click=\"toggle\"): fa(icon='times')\n          hr\n          div.padding.overflow-auto\n            form(@submit.prevent=\"$store.dispatch('placeOrder',$event); visible=false\")\n              input(type=\"hidden\" name=\"booking_id\" :value=\"params.booking_id\")\n              table.wide\n                tr(v-for=\"addon,index in JSON.parse(params.booking_addons)\" v-if=\"addon.addon_type=='PRINT' && !((addon.addon_source=='PACKAGE' || addon.addon_source=='BOOKING') && params.booking_addons_isordered == 1)\")\n                  td\n                    span.bold {{addon.addon_description}} Print\n                    br\n                    span ({{addon.addon_source == 'PACKAGE' ? 'Free from Package' : addon.addon_source == 'BOOKING' ? 'Addon' : 'P' + addon.addon_price }})\n                  td\n                    input(type=\"text\" :addon=\"JSON.stringify(addon)\" placeholder=\"Filename of Photo\" style=\"padding-left: 1rem\" :name=\"'addon' + index\")\n              br\n              .flex\n                select(ref=\"selectedPrint\")\n                  option(v-for=\"printAddon in $store.getters.addons.filter(addon => addon.addon_type=='PRINT')\" :value=\"JSON.stringify(printAddon)\") {{ printAddon.addon_description }}\n                button(@click.prevent=\"params.booking_addons = JSON.parse(params.booking_addons); params.booking_addons.push(JSON.parse($refs.selectedPrint.value)); params.booking_addons = JSON.stringify(params.booking_addons)\") Add more prints\n              span Total: Php {{$parent.getTotalPrice(params.booking_addons)}}\n              button(class=\"wide primary justify-center\" type=\"submit\") Place Order\n\n</template>\n\n<script>\nimport Modal from '@/components/reusable/modal.vue'\n\nexport default {\n  components: {\n    'modal': Modal,\n    \n  },\n  created () {\n    this.$store.dispatch('getUserBookings',this.$store.getters.userId)\n    this.$store.dispatch('loadThemes')\n    this.$store.dispatch('loadAddons')\n  },\n  methods: {\n    submitPayment(booking_id){\n      console.log('Called Submit Payment')\n      console.log('imageurl:' + this.imageUrl)\n      var formdata = new FormData();\n      formdata.append('booking_id',booking_id)\n      formdata.append('deposit_slip', this.imageUrl)\n      this.$store.dispatch('submitPayment',formdata)\n    },\n    getTotalPrice(params){\n      var array = JSON.parse(params).filter(addon => addon.addon_source != 'BOOKING' && addon.addon_source != 'PACKAGE').map(addon => addon.addon_price);\n                    var x = 0\n                    array.forEach(element => {\n                        x += element;\n                    });\n                    return x;\n    }\n  },\n  computed: {\n    imageUrl () {\n      try {\n        return this.$refs.booking.$refs.fileupload.imageUrl\n      }\n      catch {\n        return \"\"\n      }\n    }\n  }\n  \n}\n</script>\n"],"sourceRoot":"src/views/child-views"}]}