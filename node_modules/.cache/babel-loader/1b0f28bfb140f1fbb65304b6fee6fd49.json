{"remainingRequest":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/babel-loader/lib/index.js!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/src/views/child-views/dashboard-bookings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/src/views/child-views/dashboard-bookings.vue","mtime":1551680180612},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Modal from \"@/components/reusable/modal.vue\";\nexport default {\n  data: function data() {\n    return {\n      imageUrl: \"\"\n    };\n  },\n  components: {\n    modal: Modal\n  },\n  created: function created() {\n    this.$store.dispatch(\"getUserBookings\", this.$store.getters.userId);\n    this.$store.dispatch(\"loadThemes\");\n    this.$store.dispatch(\"loadAddons\");\n  },\n  methods: {\n    catchParse: function catchParse(thing) {\n      try {\n        return JSON.parse(thing.replace(/\\n/g, \"<br>\"));\n      } catch (_unused) {\n        console.error(\"catchParse: Error - can't parse \" + thing);\n      }\n    },\n    logg: function logg(text) {\n      console.log(text);\n    },\n    submitPayment: function submitPayment(booking_id) {\n      console.log(\"Called Submit Payment\");\n      console.log(\"imageurl:\" + this.imageUrl);\n      var formdata = new FormData();\n      formdata.append(\"booking_id\", booking_id);\n      formdata.append(\"deposit_slip\", this.imageUrl);\n      this.$store.dispatch(\"submitPayment\", formdata);\n    },\n    getTotalPrice: function getTotalPrice(params) {\n      var array = this.catchParse(params).filter(function (addon) {\n        return addon.addon_source != \"BOOKING\" && addon.addon_source != \"PACKAGE\";\n      }).map(function (addon) {\n        return addon.addon_price;\n      });\n      var x = 0;\n      array.forEach(function (element) {\n        x += element;\n      });\n      return x;\n    }\n  }\n};",{"version":3,"sources":["dashboard-bookings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA,OAAA,KAAA,MAAA,iCAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GANA;AASA,EAAA,OATA,qBASA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,iBAAA,EAAA,KAAA,MAAA,CAAA,OAAA,CAAA,MAAA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,YAAA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,YAAA;AACA,GAbA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,KADA,EACA;AACA,UAAA;AACA,eAAA,IAAA,CAAA,KAAA,CAAA,KAAA,CAAA,OAAA,CAAA,KAAA,EAAA,MAAA,CAAA,CAAA;AACA,OAFA,CAEA,gBAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,qCAAA,KAAA;AACA;AACA,KAPA;AAQA,IAAA,IARA,gBAQA,IARA,EAQA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,KAVA;AAWA,IAAA,aAXA,yBAWA,UAXA,EAWA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,uBAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,cAAA,KAAA,QAAA;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,YAAA,EAAA,UAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,cAAA,EAAA,KAAA,QAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,QAAA;AACA,KAlBA;AAmBA,IAAA,aAnBA,yBAmBA,MAnBA,EAmBA;AACA,UAAA,KAAA,GAAA,KAAA,UAAA,CAAA,MAAA,EACA,MADA,CAEA,UAAA,KAAA;AAAA,eACA,KAAA,CAAA,YAAA,IAAA,SAAA,IAAA,KAAA,CAAA,YAAA,IAAA,SADA;AAAA,OAFA,EAKA,GALA,CAKA,UAAA,KAAA;AAAA,eAAA,KAAA,CAAA,WAAA;AAAA,OALA,CAAA;AAMA,UAAA,CAAA,GAAA,CAAA;AACA,MAAA,KAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,QAAA,CAAA,IAAA,OAAA;AACA,OAFA;AAGA,aAAA,CAAA;AACA;AA/BA;AAdA,CAAA","sourcesContent":["<template lang=\"pug\">\ndiv\n  .padding-large(style=\"height: 100%\")\n    div.flex.justify-space-between.align-center\n      h2 My Bookings\n      button.primary.padding(@click=\"$router.push('/book')\")\n        fa(icon=\"plus\")\n        span.margin-left-small New Booking\n    div.margin-y\n\n      div.card.padding.flex.justify-space-between.align-center.margin-bottom-small(v-for=\"booking in $store.getters.myBookings\")\n        div.flex\n          div\n            h5 DATE\n            br\n            span {{booking.booking_date}}\n          div.margin-left-large\n            h5 STATUS\n            br\n            transition(name=\"switch-up\" mode=\"out-in\")\n              span(:key=\"booking.booking_status\") {{booking.booking_status}}\n        div\n          button(@click=`logg('trying to show..'); $refs.booking.show(booking);logg('should be shown'); `) View\n          button.margin-left-small.primary(@click=`$refs.orderPrints.show(booking)` v-if=\"booking.booking_status=='COMPLETED'\") Order Prints\n\n  \n  \n      span(v-if=\"$store.getters.myBookings.length==0\") No bookings to show.\n  modal(ref=\"booking\" inline-template)\n    form(@submit.prevent=\"\")\n      transition(name='fade' appear)\n        #backdrop.fixed-fill(@click=\"toggle\" v-if=\"visible\")\n      transition(name='center-scale' appear)\n        #modal(v-if=\"visible\").card.fixed-center.flex.column.five-large.seven-medium.twelve-small.max-high\n          div.flex.justify-space-between.align-center.wide\n            h2.padding Booking Details\n            a.padding(@click=\"toggle\"): fa(icon='times')\n          hr\n          div.padding.overflow-auto\n            table.wide\n              tr\n                td Schedule\n                td {{params.booking_date}} | {{params.booking_time}}\n              tr\n                td Status\n                td {{params.booking_status}}\n              tr\n                td Total Price\n                td {{params.booking_total_price}}\n              tr\n                td Payment Slip\n                td\n                  fileupload(v-on:saveUrl=\"$parent.imageUrl = $event\" ref=\"fileupload\" v-if=\"params.booking_status=='AWAITING_PAYMENT'\" url=\"\" required=true)\n                  img(:src=\"params.booking_deposit_slip\" v-else)\n            form()\n                fieldset\n                  details\n                    summary Themes\n                    br\n                    .grid.grid-auto\n                      img(v-for=\"themeid in $parent.catchParse(params.booking_themes)\" :src=\"$store.getters.themes.find(theme => theme.theme_id == themeid).theme_image\" style=\"width: 100%; border-radius: 0.5rem\")\n            form(@submit.prevent=\"$parent.submitPayment(params.booking_id); visible=false\" novalidate=\"false\")\n              fieldset\n                details\n                  summary Package Details\n                  br\n                  table.wide\n                    tr\n                      td Package Name\n                      td {{ $parent.catchParse(params.package).package_name }}\n                    tr\n                      td Package Description\n                      td(v-html=\"$parent.catchParse(params.package)['package_description']\")\n                    tr\n                      td Duration\n                      td {{ $parent.catchParse(params.package)['package_minutes'] }}\n                    tr\n                      td Addons\n                      td\n                        ul\n                          li(v-for=\"addon in $parent.catchParse(params.booking_addons)\")\n                            span {{addon.addon_type}} : {{addon.addon_description}} (P {{addon.addon_price}})\n    \n                br\n                div.flex\n                  button.flex-grow(type=\"submit\" v-if=\"params.booking_status=='AWAITING_PAYMENT' && $parent.imageUrl!=''\" ) Submit Payment\n\n  modal(ref=\"orderPrints\" inline-template)\n    form(@submit.prevent=\"\")\n      transition(name='fade' appear)\n        #backdrop.fixed-fill(@click=\"toggle\" v-if=\"visible\")\n      transition(name='center-scale' appear)\n        #modal(v-if=\"visible\").card.fixed-center.flex.column.five-large.seven-medium.twelve-small.max-high\n          div.flex.justify-space-between.align-center.wide\n            h2.padding Order Prints\n            a.padding(@click=\"toggle\"): fa(icon='times')\n          hr\n          div.padding.overflow-auto\n            form(@submit.prevent=\"$store.dispatch('placeOrder',$event); visible=false\")\n              input(type=\"hidden\" name=\"booking_id\" :value=\"params.booking_id\")\n              input(type=\"hidden\" id=\"total\" name=\"total\" :value=\"$parent.getTotalPrice(params.booking_addons)\")\n              table.wide\n                tr(v-for=\"addon,index in $parent.catchParse(params.booking_addons)\" v-if=\"addon.addon_type=='PRINT' && !((addon.addon_source=='PACKAGE' || addon.addon_source=='BOOKING') && params.booking_addons_isordered == 1)\")\n                  td\n                    span.bold {{addon.addon_description}} Print\n                    br\n                    span ({{addon.addon_source == 'PACKAGE' ? 'Free from Package' : addon.addon_source == 'BOOKING' ? 'Addon' : 'P' + addon.addon_price }})\n                  td\n                    input(type=\"text\" :addon=\"JSON.stringify(addon)\" placeholder=\"Filename of Photo\" style=\"padding-left: 1rem\" :name=\"'addon' + index\")\n                    \n              br\n              .flex\n                select(ref=\"selectedPrint\")\n                  option(v-for=\"printAddon in $store.getters.addons.filter(addon => addon.addon_type=='PRINT')\" :value=\"JSON.stringify(printAddon)\") {{ printAddon.addon_description }}\n                button(@click.prevent=\"params.booking_addons = $parent.catchParse(params.booking_addons); params.booking_addons.push($parent.catchParse($refs.selectedPrint.value)); params.booking_addons = JSON.stringify(params.booking_addons)\") Add more prints\n              span Total: Php {{$parent.getTotalPrice(params.booking_addons)}}\n              button(class=\"wide primary justify-center\" type=\"submit\") Place Order\n\n</template>\n\n<script>\nimport Modal from \"@/components/reusable/modal.vue\";\n\nexport default {\n  data(){\n    return{\n      imageUrl: \"\"\n    }\n  },\n\tcomponents: {\n\t\tmodal: Modal\n\t},\n\tcreated() {\n\t\tthis.$store.dispatch(\"getUserBookings\", this.$store.getters.userId);\n\t\tthis.$store.dispatch(\"loadThemes\");\n\t\tthis.$store.dispatch(\"loadAddons\");\n\t},\n\tmethods: {\n\t\tcatchParse(thing) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(thing.replace(/\\n/g, \"<br>\"));\n\t\t\t} catch {\n\t\t\t\tconsole.error(\"catchParse: Error - can't parse \" + thing);\n\t\t\t}\n\t\t},\n\t\tlogg(text) {\n\t\t\tconsole.log(text);\n\t\t},\n\t\tsubmitPayment(booking_id) {\n\t\t\tconsole.log(\"Called Submit Payment\");\n\t\t\tconsole.log(\"imageurl:\" + this.imageUrl);\n\t\t\tvar formdata = new FormData();\n\t\t\tformdata.append(\"booking_id\", booking_id);\n\t\t\tformdata.append(\"deposit_slip\", this.imageUrl);\n\t\t\tthis.$store.dispatch(\"submitPayment\", formdata);\n\t\t},\n\t\tgetTotalPrice(params) {\n\t\t\tvar array = this.catchParse(params)\n\t\t\t\t.filter(\n\t\t\t\t\taddon =>\n\t\t\t\t\t\taddon.addon_source != \"BOOKING\" && addon.addon_source != \"PACKAGE\"\n\t\t\t\t)\n\t\t\t\t.map(addon => addon.addon_price);\n\t\t\tvar x = 0;\n\t\t\tarray.forEach(element => {\n\t\t\t\tx += element;\n\t\t\t});\n\t\t\treturn x;\n\t\t}\n\t},\n};\n</script>\n"],"sourceRoot":"src/views/child-views"}]}