{"remainingRequest":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/thread-loader/dist/cjs.js!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/babel-loader/lib/index.js!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/src/views/child-views/admin-bookings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/src/views/child-views/admin-bookings.vue","mtime":1551430260038},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport Modal from \"@/components/reusable/modal.vue\";\nimport Switcher from \"@/components/reusable/switcher.vue\";\nexport default {\n  components: {\n    modal: Modal,\n    switcher: Switcher\n  },\n  mounted: function mounted() {\n    this.$store.dispatch(\"getAllBookings\");\n  },\n  data: function data() {\n    return {\n      active: \"all\",\n      reschedule_date: \"\",\n      reschedule_slot: \"\",\n      reschedule_slots: []\n    };\n  },\n  watch: {\n    reschedule_date: function reschedule_date() {\n      var _this = this;\n\n      var formData = new FormData();\n      formData.append(\"booking_date\", this.reschedule_date);\n      console.log(this.$refs.booking.params.package);\n      formData.append(\"package_minutes\", JSON.parse(this.$refs.booking.params.package).package_minutes);\n      axios.post(\"/_system/php/api/booking/getOpenSlots.php\", formData).then(function (response) {\n        if (response.data.success) {\n          _this.reschedule_slots = response.data.data;\n        } else {\n          console.error(response);\n          return [];\n        }\n      }).catch(function (error) {\n        console.log(error);\n        return [];\n      });\n    }\n  },\n  methods: {\n    catchParse: function catchParse(thing) {\n      try {\n        return JSON.parse(thing.replace(/\\n/g, \"<br>\"));\n      } catch (_unused) {\n        console.error(\"catchParse: Error - can't parse \" + thing);\n      }\n    },\n    reschedule: function reschedule() {\n      var _this2 = this;\n\n      var formData = new FormData();\n      formData.append(\"booking_id\", this.$refs.booking.params.booking_id);\n      formData.append(\"booking_date\", this.reschedule_date);\n      formData.append(\"booking_time\", this.reschedule_slot);\n      axios.post(\"/_system/php/api/booking/reschedule.php\", formData).then(function (response) {\n        if (response.data.success) {\n          _this2.$store.dispatch(\"getAllBookings\");\n        } else {\n          console.error(response);\n          return [];\n        }\n      }).catch(function (error) {\n        console.log(error);\n        return [];\n      });\n    }\n  },\n  computed: {\n    filteredBookings: function filteredBookings() {\n      var bookings = this.$store.getters.allBookings;\n\n      if (this.active == \"all\") {\n        return bookings;\n      } else if (this.active == \"paid\") {\n        return bookings.filter(function (booking) {\n          return booking.booking_status == \"AWAITING_CONFIRMATION\";\n        });\n      } else if (this.active == \"overdue\") {\n        return bookings.filter(function (booking) {\n          if (booking.booking_status != \"AWAITING_PAYMENT\") {\n            return false;\n          }\n\n          var created = new Date(booking.booking_created);\n          var now = new Date();\n          var milihours = now - created;\n          var hour = milihours / 3.6e6;\n          return hour > 24;\n        });\n      }\n    }\n  }\n};",null]}