{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-7df44a28\"],{\"02f4\":function(t,e,a){var n=a(\"4588\"),i=a(\"be13\");t.exports=function(t){return function(e,a){var r,s,o=String(i(e)),c=n(a),l=o.length;return c<0||c>=l?t?\"\":void 0:(r=o.charCodeAt(c),r<55296||r>56319||c+1===l||(s=o.charCodeAt(c+1))<56320||s>57343?t?o.charAt(c):r:t?o.slice(c,c+2):s-56320+(r-55296<<10)+65536)}}},\"0390\":function(t,e,a){\"use strict\";var n=a(\"02f4\")(!0);t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},\"0bfb\":function(t,e,a){\"use strict\";var n=a(\"cb7c\");t.exports=function(){var t=n(this),e=\"\";return t.global&&(e+=\"g\"),t.ignoreCase&&(e+=\"i\"),t.multiline&&(e+=\"m\"),t.unicode&&(e+=\"u\"),t.sticky&&(e+=\"y\"),e}},\"1f3e\":function(t,e,a){\"use strict\";var n=a(\"4bfa\"),i=a.n(n);i.a},\"214f\":function(t,e,a){\"use strict\";a(\"b0c5\");var n=a(\"2aba\"),i=a(\"32e9\"),r=a(\"79e5\"),s=a(\"be13\"),o=a(\"2b4c\"),c=a(\"520a\"),l=o(\"species\"),u=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:\"7\"},t},\"7\"!==\"\".replace(t,\"$<a>\")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a=\"ab\".split(t);return 2===a.length&&\"a\"===a[0]&&\"b\"===a[1]}();t.exports=function(t,e,a){var p=o(t),f=!r(function(){var e={};return e[p]=function(){return 7},7!=\"\"[t](e)}),v=f?!r(function(){var e=!1,a=/a/;return a.exec=function(){return e=!0,null},\"split\"===t&&(a.constructor={},a.constructor[l]=function(){return a}),a[p](\"\"),!e}):void 0;if(!f||!v||\"replace\"===t&&!u||\"split\"===t&&!d){var g=/./[p],h=a(s,p,\"\"[t],function(t,e,a,n,i){return e.exec===c?f&&!i?{done:!0,value:g.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}}),_=h[0],m=h[1];n(String.prototype,t,_),i(RegExp.prototype,p,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},\"2b18\":function(t,e,a){\"use strict\";a(\"cadf\"),a(\"551c\"),a(\"097d\");var n,i,r={props:[\"steps\"],data:function(){return{step:1}},methods:{next:function(){this.step<this.steps&&this.step++},previous:function(){this.step>1&&this.step--}}},s=r,o=a(\"2877\"),c=Object(o[\"a\"])(s,n,i,!1,null,null,null);c.options.__file=\"stepper.vue\";var l=c.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"flex column\"},[\"\"!=t.imageUrl&&0==t.uploading?a(\"img\",{staticStyle:{width:\"50%\"},attrs:{src:t.imageUrl}}):t._e(),\"\"==t.imageUrl&&\"\"!=t.url?a(\"img\",{staticStyle:{width:\"50%\"},attrs:{src:t.url}}):t._e(),1==t.uploading?a(\"span\",{staticClass:\"flex align-center\"},[a(\"fa\",{attrs:{icon:\"sync-alt\",spin:\"\"}}),a(\"span\",{staticClass:\"margin-left-small\"},[t._v(\"Please wait\")])],1):t._e(),a(\"input\",{ref:\"fileupload\",staticClass:\"wide\",attrs:{type:\"file\",accept:\"image/x-png,image/gif,image/jpeg\",required:t.required},on:{change:function(e){t.uploadFile()}}})])},d=[],p=a(\"bc3a\"),f=a.n(p),v={props:{url:{type:String,default:\"\"},required:{type:Boolean,default:!1}},data:function(){return{imageUrl:\"\",file:null,uploading:!1}},methods:{uploadFile:function(){var t=this;if(this.uploading=!0,this.file=this.$refs.fileupload.files[0],null!=this.file){var e=new FormData;e.append(\"image\",this.file),f.a.post(\"/_system/php/functions/ftpupload.php\",e,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(e){console.log(e),e.data.success?(t.imageUrl=e.data.data,t.uploading=!1,t.$emit(\"saveUrl\",e.data.data)):console.log(\"Error in File Upload\")}).catch(function(t){console.error(t)})}}}},g=v,h=Object(o[\"a\"])(g,u,d,!1,null,null,null);h.options.__file=\"fileupload.vue\";var _,m,b=h.exports,k={components:{fileupload:b,stepper:l},data:function(){return{params:{},visible:!1}},methods:{toggle:function(){this.visible=!this.visible},show:function(t){this.visible=!0,this.params=t}}},x=k,w=(a(\"371d\"),Object(o[\"a\"])(x,_,m,!1,null,\"4da6ce68\",null));w.options.__file=\"modal.vue\";e[\"a\"]=w.exports},\"371d\":function(t,e,a){\"use strict\";var n=a(\"d1e8\"),i=a.n(n);i.a},\"43a5\":function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"padding\"},[a(\"div\",{staticClass:\"flex wide justify-space-between\"},[t._m(0),a(\"div\",[a(\"a\",{staticClass:\"padding\",class:{active:\"all\"==t.active},on:{click:function(e){t.active=\"all\"}}},[t._v(\"Bookings\")]),a(\"a\",{staticClass:\"padding\",class:{active:\"paid\"==t.active},on:{click:function(e){t.active=\"paid\"}}},[t._v(\"Paid\")]),a(\"a\",{staticClass:\"padding\",class:{active:\"overdue\"==t.active},on:{click:function(e){t.active=\"overdue\"}}},[t._v(\"Overdue\")])])]),a(\"table\",{staticClass:\"wide\"},t._l(t.filteredBookings,function(e){return a(\"tr\",[a(\"td\",[a(\"h3\",[t._v(t._s(e.account_name))]),a(\"h5\",[t._v(t._s(e.booking_status))])]),a(\"td\",[a(\"button\",{staticClass:\"float-right\",on:{click:function(a){t.$refs.booking.show(e)}}},[t._v(\"View\")])])])}),0),a(\"modal\",{ref:\"booking\",inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"transition\",{attrs:{name:\"fade\"}},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.visible,expression:\"visible\"}],staticClass:\"fixed-fill\",attrs:{id:\"backdrop\"},on:{click:t.toggle}})]),a(\"transition\",{attrs:{name:\"fade\"}},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.visible,expression:\"visible\"}],staticClass:\"card fixed-center flex column five-large seven-medium twelve-small max-high\",attrs:{id:\"modal\"}},[a(\"div\",{staticClass:\"flex justify-space-between align-center wide\"},[a(\"h2\",{staticClass:\"padding\"},[t._v(\"Booking Details\")]),a(\"a\",{staticClass:\"padding\",on:{click:t.toggle}},[a(\"fa\",{attrs:{icon:\"times\"}})],1)]),a(\"hr\"),a(\"div\",{staticClass:\"padding overflow-auto\"},[a(\"table\",{staticClass:\"wide\"},[a(\"tr\",[a(\"td\",[t._v(\"Booked on\")]),a(\"td\",[t._v(t._s(t.params.booking_created))])]),a(\"tr\",[a(\"td\",[t._v(\"Schedule\")]),a(\"td\",[t._v(t._s(t.params.booking_date)+\", \"+t._s(t.params.booking_time))])]),a(\"tr\",[a(\"td\",[t._v(\"Status\")]),a(\"td\",[t._v(t._s(t.params.booking_status))])]),\"BANK_DEPOSIT\"==t.params.payment_method?a(\"tr\",[a(\"td\",[t._v(\"Deposit Slip\")]),a(\"td\",[a(\"img\",{attrs:{src:t.params.booking_deposit_slip}})])]):a(\"tr\",[a(\"td\",[t._v(\"Payment Method\")]),a(\"td\",[t._v(\"Credit Card\")])])]),a(\"div\",{staticClass:\"flex wide\"},[\"COMPLETED\"!=t.params.booking_status?a(\"button\",{staticClass:\"flex-growBooking\",on:{click:function(e){t.$store.dispatch(\"cancelBooking\",t.params.booking_id),t.visible=!1}}},[t._v(\"Cancel Booking\")]):t._e(),\"AWAITING_CONFIRMATION\"==t.params.booking_status||\"AWAITING_PAYMENT\"==t.params.booking_status?a(\"button\",{staticClass:\"flex-grow margin-left-small primary\",on:{click:function(e){t.$store.dispatch(\"approveBooking\",t.params.booking_id),t.visible=!1}}},[t._v(\"Approve Booking\")]):t._e(),\"BOOKED\"==t.params.booking_status?a(\"button\",{staticClass:\"flex-grow margin-left-small primary\",on:{click:function(e){t.$store.dispatch(\"markAsCompleted\",t.params.booking_id),t.visible=!1}}},[t._v(\"Mark as Done\")]):t._e()]),a(\"form\",{staticClass:\"margin-top\"},[a(\"fieldset\",[a(\"details\",[a(\"summary\",[t._v(\"Package Details\")]),a(\"br\"),a(\"table\",{staticClass:\"wide\"},[a(\"tr\",[a(\"td\",[t._v(\"Package Name\")]),a(\"td\",[t._v(t._s(t.$parent.catchParse(t.params.package).package_name))])]),a(\"tr\",[a(\"td\",[t._v(\"Package Description\")]),a(\"td\",{domProps:{innerHTML:t._s(t.$parent.catchParse(t.params.package).package_description)}})]),a(\"tr\",[a(\"td\",[t._v(\"Duration\")]),a(\"td\",[t._v(t._s(t.$parent.catchParse(t.params.package).package_minutes)+\" mins\")])]),a(\"tr\",[a(\"td\",[t._v(\"Addons\")]),a(\"td\",[a(\"ul\",t._l(t.$parent.catchParse(t.params.package).package_addons,function(e){return a(\"li\",[a(\"span\",[t._v(t._s(e.addon_description))]),a(\"span\",[t._v(t._s(e.addon_type))]),a(\"span\",[t._v(t._s(e.addon_price))])])}),0)])]),a(\"tr\",[a(\"td\",[t._v(\"Themes\")]),a(\"td\",[a(\"div\",{staticClass:\"grid grid-auto\"},t._l(t.$parent.catchParse(t.params.booking_themes),function(e){return a(\"img\",{staticStyle:{width:\"100%\",\"border-radius\":\"0.5rem\"},attrs:{src:t.$store.getters.themes.find(function(t){return t.theme_id==e}).theme_image}})}),0)])]),a(\"tr\",[a(\"td\",[t._v(\"Total Price\")]),a(\"td\",[t._v(t._s(t.params.booking_total_price))])])])])]),a(\"fieldset\",[a(\"details\",[a(\"summary\",[t._v(\"Reschedule\")]),a(\"div\",{staticClass:\"flex align-center\"}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.$parent.reschedule_date,expression:\"$parent.reschedule_date\"}],attrs:{type:\"date\"},domProps:{value:t.$parent.reschedule_date},on:{input:function(e){e.target.composing||t.$set(t.$parent,\"reschedule_date\",e.target.value)}}}),a(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.$parent.reschedule_slot,expression:\"$parent.reschedule_slot\"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e=\"_value\"in t?t._value:t.value;return e});t.$set(t.$parent,\"reschedule_slot\",e.target.multiple?a:a[0])}}},t._l(t.$parent.reschedule_slots,function(e){return a(\"option\",[t._v(t._s(e))])}),0),a(\"button\",{on:{click:function(e){e.preventDefault(),t.toggle(),t.$parent.reschedule()}}},[t._v(\"Reschedule\")])])])])])])])],1)},staticRenderFns:[]}})],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"h2\",[t._v(\"Bookings\")])])}],r=(a(\"a481\"),a(\"bc3a\")),s=a.n(r),o=a(\"2b18\"),c=a(\"f9d7\"),l={components:{modal:o[\"a\"],switcher:c[\"a\"]},mounted:function(){this.$store.dispatch(\"getAllBookings\")},data:function(){return{active:\"all\",reschedule_date:\"\",reschedule_slot:\"\",reschedule_slots:[]}},watch:{reschedule_date:function(){var t=this,e=new FormData;e.append(\"booking_date\",this.reschedule_date),console.log(this.$refs.booking.params.package),e.append(\"package_minutes\",JSON.parse(this.$refs.booking.params.package).package_minutes),s.a.post(\"/_system/php/api/booking/getOpenSlots.php\",e).then(function(e){if(!e.data.success)return console.error(e),[];t.reschedule_slots=e.data.data}).catch(function(t){return console.log(t),[]})}},methods:{catchParse:function(t){try{return JSON.parse(t.replace(/\\n/g,\"<br>\"))}catch(e){console.error(\"catchParse: Error - can't parse \"+t)}},reschedule:function(){var t=this,e=new FormData;e.append(\"booking_id\",this.$refs.booking.params.booking_id),e.append(\"booking_date\",this.reschedule_date),e.append(\"booking_time\",this.reschedule_slot),s.a.post(\"/_system/php/api/booking/reschedule.php\",e).then(function(e){if(!e.data.success)return console.error(e),[];t.$store.dispatch(\"getAllBookings\")}).catch(function(t){return console.log(t),[]})}},computed:{filteredBookings:function(){var t=this.$store.getters.allBookings;return\"all\"==this.active?t:\"paid\"==this.active?t.filter(function(t){return\"AWAITING_CONFIRMATION\"==t.booking_status}):\"overdue\"==this.active?t.filter(function(t){if(\"AWAITING_PAYMENT\"!=t.booking_status)return!1;var e=new Date(t.booking_created),a=new Date,n=a-e,i=n/36e5;return i>24}):void 0}}},u=l,d=a(\"2877\"),p=Object(d[\"a\"])(u,n,i,!1,null,null,null);p.options.__file=\"admin-bookings.vue\";e[\"default\"]=p.exports},\"4bfa\":function(t,e,a){},\"520a\":function(t,e,a){\"use strict\";var n=a(\"0bfb\"),i=RegExp.prototype.exec,r=String.prototype.replace,s=i,o=\"lastIndex\",c=function(){var t=/a/,e=/b*/g;return i.call(t,\"a\"),i.call(e,\"a\"),0!==t[o]||0!==e[o]}(),l=void 0!==/()??/.exec(\"\")[1],u=c||l;u&&(s=function(t){var e,a,s,u,d=this;return l&&(a=new RegExp(\"^\"+d.source+\"$(?!\\\\s)\",n.call(d))),c&&(e=d[o]),s=i.call(d,t),c&&s&&(d[o]=d.global?s.index+s[0].length:e),l&&s&&s.length>1&&r.call(s[0],a,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)}),s}),t.exports=s},\"5f1b\":function(t,e,a){\"use strict\";var n=a(\"23c6\"),i=RegExp.prototype.exec;t.exports=function(t,e){var a=t.exec;if(\"function\"===typeof a){var r=a.call(t,e);if(\"object\"!==typeof r)throw new TypeError(\"RegExp exec method returned something other than an Object or null\");return r}if(\"RegExp\"!==n(t))throw new TypeError(\"RegExp#exec called on incompatible receiver\");return i.call(t,e)}},a481:function(t,e,a){\"use strict\";var n=a(\"cb7c\"),i=a(\"4bf8\"),r=a(\"9def\"),s=a(\"4588\"),o=a(\"0390\"),c=a(\"5f1b\"),l=Math.max,u=Math.min,d=Math.floor,p=/\\$([$&`']|\\d\\d?|<[^>]*>)/g,f=/\\$([$&`']|\\d\\d?)/g,v=function(t){return void 0===t?t:String(t)};a(\"214f\")(\"replace\",2,function(t,e,a,g){return[function(n,i){var r=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,r,i):a.call(String(r),n,i)},function(t,e){var i=g(a,t,this,e);if(i.done)return i.value;var d=n(t),p=String(this),f=\"function\"===typeof e;f||(e=String(e));var _=d.global;if(_){var m=d.unicode;d.lastIndex=0}var b=[];while(1){var k=c(d,p);if(null===k)break;if(b.push(k),!_)break;var x=String(k[0]);\"\"===x&&(d.lastIndex=o(p,r(d.lastIndex),m))}for(var w=\"\",$=0,y=0;y<b.length;y++){k=b[y];for(var C=String(k[0]),E=l(u(s(k.index),p.length),0),P=[],A=1;A<k.length;A++)P.push(v(k[A]));var S=k.groups;if(f){var N=[C].concat(P,E,p);void 0!==S&&N.push(S);var O=String(e.apply(void 0,N))}else O=h(C,p,E,P,S,e);E>=$&&(w+=p.slice($,E)+O,$=E+C.length)}return w+p.slice($)}];function h(t,e,n,r,s,o){var c=n+t.length,l=r.length,u=f;return void 0!==s&&(s=i(s),u=p),a.call(o,u,function(a,i){var o;switch(i.charAt(0)){case\"$\":return\"$\";case\"&\":return t;case\"`\":return e.slice(0,n);case\"'\":return e.slice(c);case\"<\":o=s[i.slice(1,-1)];break;default:var u=+i;if(0===u)return i;if(u>l){var p=d(u/10);return 0===p?i:p<=l?void 0===r[p-1]?i.charAt(1):r[p-1]+i.charAt(1):i}o=r[u-1]}return void 0===o?\"\":o})}})},b0c5:function(t,e,a){\"use strict\";var n=a(\"520a\");a(\"5ca1\")({target:\"RegExp\",proto:!0,forced:n!==/./.exec},{exec:n})},d1e8:function(t,e,a){},f9d7:function(t,e,a){\"use strict\";var n,i,r={data:function(){return{active:\"\"}}},s=r,o=(a(\"1f3e\"),a(\"2877\")),c=Object(o[\"a\"])(s,n,i,!1,null,\"7c25a286\",null);c.options.__file=\"switcher.vue\";e[\"a\"]=c.exports}}]);","extractedComments":[]}