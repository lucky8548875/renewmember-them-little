{"remainingRequest":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/src/views/child-views/admin-packages.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/src/views/child-views/admin-packages.vue","mtime":1551772700923},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/lucky8548875/SJ Raymundo (2TB)/Documents/Shame/remember-them-little-pwa/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Modal from '@/components/reusable/modal.vue'\nexport default {\n  data (){\n    return {\n      selectedAddon: '',\n\n      // for Adding\n      selectedAddons: [],\n\n      package_inclusions: [],\n\n    }\n  },\n\n  components: {\n    'modal': Modal\n  },\n  methods: {\n    brtonl(text){\n      try{\n      return text.replace(/<br \\/>/g,\"\\n\")\n      }\n      catch {\n        return text\n      }\n    },\n    descriptionToHtml(description){\n      var x = (description+\"\").replace(new RegExp(\"\\n\", \"g\"), \"<br>\")\n      return x\n    },\n    loadPackageInclusions(package_id){\n      this.package_inclusions = this.$store.getters.inclusions.filter(inclusion => inclusion.package_id == package_id).map(inclusion => inclusion.addon_id)\n    },\n    categoryIdToName(id){\n      try{\n        return (this.$store.getters.categories.find(category => category.category_id == id)).category_name\n      }\n      catch{\n        return \"null\";\n      }\n    },\n    addonFinder(addon_id){\n      return this.$store.getters.addons.find(addon => addon.addon_id == addon_id)\n    },\n    prepareAddPackage(submitEvent){\n      console.log('Prepare Add Package Called')\n      \n      var elements = submitEvent.target.elements;\n      var formData = new FormData();\n\n      formData.append('package_name', elements.package_name.value) \n      formData.append('package_description', elements.package_description.value) \n      formData.append('category_id', elements.category_id.value) \n      formData.append('package_price', elements.package_price.value) \n      formData.append('package_minutes', elements.package_minutes.value) \n      formData.append('package_themes', elements.package_themes.value) \n      formData.append('package_active', elements.package_active.checked ? 1 : 0)\n      formData.append('package_promo', elements.package_promo.checked ? 1 : 0)\n      formData.append('package_inclusions', JSON.stringify(this.selectedAddons))\n      console.log(JSON.stringify(this.selectedAddons))\n      this.$store.dispatch('addPackage', formData)\n      \n    },\n    prepareEditPackage(submitEvent){\n      console.log('Prepare Edit Package Called')\n      \n      var elements = submitEvent.target.elements;\n      var formData = new FormData();\n      formData.append('package_id', elements.package_id.value) \n      formData.append('package_name', elements.package_name.value) \n      formData.append('package_description', elements.package_description.value) \n      formData.append('category_id', elements.category_id.value) \n      formData.append('package_price', elements.package_price.value) \n      formData.append('package_minutes', elements.package_minutes.value) \n      formData.append('package_themes', elements.package_themes.value) \n      formData.append('package_active', elements.package_active.checked ? 1 : 0)\n      formData.append('package_promo', elements.package_promo.checked ? 1 : 0)\n      formData.append('package_inclusions', JSON.stringify(this.package_inclusions))\n      console.log(JSON.stringify(this.selectedAddons))\n      this.$store.dispatch('editPackage', formData)\n      \n    },\n  }\n}\n  \n",{"version":3,"sources":["admin-packages.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"admin-packages.vue","sourceRoot":"src/views/child-views","sourcesContent":["<template lang=\"pug\">\n  div.padding-large(style=\"padding-top: 7rem\")\n    div.flex.wide.justify-space-between\n      //- :Left\n      div: h2 Packages\n\n      //- Right\n      div: button(@click='$refs.newpackage.show()') New Package\n    \n    //- Contents\n    table.wide\n      tr(v-for=\"packagex in $store.getters.packages\")\n        td\n          h3.margin-bottom-small {{packagex.package_name}}\n          span {{categoryIdToName(packagex.category_id)}} | {{packagex.package_active ? 'Active' : 'Inactive'}} {{packagex.package_promo ? '(Promo)' : ''}}\n        td\n          button.float-right(@click='loadPackageInclusions(packagex.package_id); $refs.editpackage.show(packagex)') Edit\n\n    modal(ref=\"newpackage\" inline-template)\n      div\n        transition(name='fade')\n          #backdrop.fixed-fill(@click=\"toggle\" v-show=\"visible\")\n        transition(name='fade')\n          #modal(v-show=\"visible\").card.fixed-center.flex.column.five-large.seven-medium.twelve-small.max-high\n            div.flex.justify-space-between.align-center.wide\n              h2.padding New Package\n              a.padding(@click=\"toggle\"): fa(icon='times')\n            hr\n            div.padding.overflow-auto\n              form.grid-1-small.grid-2-medium-plus.align-center(@submit.prevent=\"$parent.prepareAddPackage($event); visible=false;\")\n                label Package Name\n                input(type=\"text\" name=\"package_name\")\n                label Category\n                select(name=\"category_id\")\n                  option(v-for=\"category in $store.getters.categories\" :value=\"category.category_id\") {{category.category_name}}\n                label Package Price\n                input(type=\"number\" name=\"package_price\")\n                label Package Description\n                textarea(name=\"package_description\")\n                label Duration (minutes)\n                input(type=\"number\" name=\"package_minutes\")\n                label # of Themes\n                input(type=\"number\" name=\"package_themes\")\n                label Active\n                label.padding\n                  input(type=\"checkbox\" name=\"package_active\")\n                  span Active\n                label Promo\n                label.padding\n                  input(type=\"checkbox\" name=\"package_promo\")\n                  span Promo?\n                details.span-2-medium-plus.padding-y\n                  summary Inclusions\n                  div.flex.wide.align-center\n                    select.flex-grow(v-model=\"$parent.selectedAddon\")\n                      option(v-for=\"addon in $store.getters.addons\" :value=\"addon.addon_id\") {{addon.addon_description}} ({{addon.addon_type}})\n                    button(@click.prevent=\"$parent.selectedAddons.push($parent.selectedAddon)\") Add\n                  table.wide\n                    tr(v-for=\"addon_id,index in $parent.selectedAddons\")\n                      td  {{$parent.addonFinder(addon_id).addon_description}} ({{$parent.addonFinder(addon_id).addon_type}})\n                      td.float-right\n                        a(@click=\"$parent.selectedAddons.splice(index,1)\") X\n                div.flex.wide\n                  button(@click.prevent=\"visible=false\") Cancel\n                  button Add Package\n\n    modal(ref=\"editpackage\" inline-template)\n          div\n            transition(name='fade')\n              #backdrop.fixed-fill(@click=\"toggle\" v-show=\"visible\")\n            transition(name='fade')\n              #modal(v-show=\"visible\").card.fixed-center.flex.column.five-large.seven-medium.twelve-small.max-high\n                div.flex.justify-space-between.align-center.wide\n                  h2.padding Edit Package\n                  a.padding(@click=\"toggle\"): fa(icon='times')\n                hr\n                div.padding.overflow-auto\n                  form.grid-1-small.grid-2-medium-plus.align-center(@submit.prevent=\"$parent.prepareEditPackage($event); visible=false;\")\n                    label Package Name\n                    input(type=\"hidden\" name=\"package_id\" :value=\"params.package_id\")\n                    input(type=\"text\" name=\"package_name\" :value=\"params.package_name\")\n                    label Category\n                    select(name=\"category_id\")\n                      option(v-for=\"category in $store.getters.categories\" :selected=\"category.category_id == params.category_id\" :value=\"category.category_id\") {{category.category_name}}\n                    label Package Price\n                    input(type=\"number\" name=\"package_price\" :value=\"params.package_price\")\n                    label Package Description\n                    textarea( name=\"package_description\" :value=\"$parent.brtonl(params.package_description)\")\n                    //- replace(/<br \\/>/g,'\\n')\n                    label Duration (minutes)\n                    input(type=\"text\" name=\"package_minutes\" :value=\"params.package_minutes\")\n                    label # of Themes\n                    input(type=\"text\" name=\"package_themes\" :value=\"params.package_themes\")\n                    label Active\n                    label.padding\n                      input(type=\"checkbox\" :checked=\"params.package_active\" name=\"package_active\")\n                      span Active\n                    label Promo\n                    label.padding\n                      input(type=\"checkbox\" :checked=\"params.package_promo\" name=\"package_promo\")\n                      span Promo?\n                    details.span-2-medium-plus\n                      summary Inclusions\n                      div.flex.wide.align-center\n                        select.flex-grow(v-model=\"$parent.selectedAddon\")\n                          option(v-for=\"addon in $store.getters.addons\" :value=\"addon.addon_id\") {{addon.addon_description}} ({{addon.addon_type}})\n                        button(@click.prevent=\"$parent.package_inclusions.push($parent.selectedAddon)\") Add\n                      table.wide\n                        tr(v-for=\"addon_id,index in $parent.package_inclusions\")\n                          td  {{$parent.addonFinder(addon_id).addon_description}} ({{$parent.addonFinder(addon_id).addon_type}})\n                          td.float-right\n                            a(@click=\"$parent.package_inclusions.splice(index,1)\") X\n                    div.flex.wide\n                      button(@click.prevent=\"$store.dispatch('deletePackage',params.package_id); visible=false\") Delete\n                      button Edit Package\n    \n</template>\n\n<script>\nimport Modal from '@/components/reusable/modal.vue'\nexport default {\n  data (){\n    return {\n      selectedAddon: '',\n\n      // for Adding\n      selectedAddons: [],\n\n      package_inclusions: [],\n\n    }\n  },\n\n  components: {\n    'modal': Modal\n  },\n  methods: {\n    brtonl(text){\n      try{\n      return text.replace(/<br \\/>/g,\"\\n\")\n      }\n      catch {\n        return text\n      }\n    },\n    descriptionToHtml(description){\n      var x = (description+\"\").replace(new RegExp(\"\\n\", \"g\"), \"<br>\")\n      return x\n    },\n    loadPackageInclusions(package_id){\n      this.package_inclusions = this.$store.getters.inclusions.filter(inclusion => inclusion.package_id == package_id).map(inclusion => inclusion.addon_id)\n    },\n    categoryIdToName(id){\n      try{\n        return (this.$store.getters.categories.find(category => category.category_id == id)).category_name\n      }\n      catch{\n        return \"null\";\n      }\n    },\n    addonFinder(addon_id){\n      return this.$store.getters.addons.find(addon => addon.addon_id == addon_id)\n    },\n    prepareAddPackage(submitEvent){\n      console.log('Prepare Add Package Called')\n      \n      var elements = submitEvent.target.elements;\n      var formData = new FormData();\n\n      formData.append('package_name', elements.package_name.value) \n      formData.append('package_description', elements.package_description.value) \n      formData.append('category_id', elements.category_id.value) \n      formData.append('package_price', elements.package_price.value) \n      formData.append('package_minutes', elements.package_minutes.value) \n      formData.append('package_themes', elements.package_themes.value) \n      formData.append('package_active', elements.package_active.checked ? 1 : 0)\n      formData.append('package_promo', elements.package_promo.checked ? 1 : 0)\n      formData.append('package_inclusions', JSON.stringify(this.selectedAddons))\n      console.log(JSON.stringify(this.selectedAddons))\n      this.$store.dispatch('addPackage', formData)\n      \n    },\n    prepareEditPackage(submitEvent){\n      console.log('Prepare Edit Package Called')\n      \n      var elements = submitEvent.target.elements;\n      var formData = new FormData();\n      formData.append('package_id', elements.package_id.value) \n      formData.append('package_name', elements.package_name.value) \n      formData.append('package_description', elements.package_description.value) \n      formData.append('category_id', elements.category_id.value) \n      formData.append('package_price', elements.package_price.value) \n      formData.append('package_minutes', elements.package_minutes.value) \n      formData.append('package_themes', elements.package_themes.value) \n      formData.append('package_active', elements.package_active.checked ? 1 : 0)\n      formData.append('package_promo', elements.package_promo.checked ? 1 : 0)\n      formData.append('package_inclusions', JSON.stringify(this.package_inclusions))\n      console.log(JSON.stringify(this.selectedAddons))\n      this.$store.dispatch('editPackage', formData)\n      \n    },\n  }\n}\n  \n</script>\n"]}]}