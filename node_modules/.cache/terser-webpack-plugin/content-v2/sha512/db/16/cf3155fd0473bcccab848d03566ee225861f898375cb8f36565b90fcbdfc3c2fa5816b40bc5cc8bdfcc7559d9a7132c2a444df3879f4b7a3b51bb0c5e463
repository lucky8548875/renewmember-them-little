{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3085f153\"],{\"1f3e\":function(e,t,a){\"use strict\";var s=a(\"4bfa\"),i=a.n(s);i.a},\"2b18\":function(e,t,a){\"use strict\";a(\"cadf\"),a(\"551c\"),a(\"097d\");var s,i,n={props:[\"steps\"],data:function(){return{step:1}},methods:{next:function(){this.step<this.steps&&this.step++},previous:function(){this.step>1&&this.step--}}},o=n,l=a(\"2877\"),r=Object(l[\"a\"])(o,s,i,!1,null,null,null);r.options.__file=\"stepper.vue\";var c=r.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"flex column\"},[\"\"!=e.imageUrl&&0==e.uploading?a(\"img\",{staticStyle:{width:\"50%\"},attrs:{src:e.imageUrl}}):e._e(),\"\"==e.imageUrl&&\"\"!=e.url?a(\"img\",{staticStyle:{width:\"50%\"},attrs:{src:e.url}}):e._e(),1==e.uploading?a(\"span\",{staticClass:\"flex align-center\"},[a(\"fa\",{attrs:{icon:\"sync-alt\",spin:\"\"}}),a(\"span\",{staticClass:\"margin-left-small\"},[e._v(\"Please wait\")])],1):e._e(),a(\"input\",{ref:\"fileupload\",staticClass:\"wide\",attrs:{type:\"file\",accept:\"image/x-png,image/gif,image/jpeg\",required:e.required},on:{change:function(t){e.uploadFile()}}})])},u=[],p=a(\"bc3a\"),f=a.n(p),v={props:{url:{type:String,default:\"\"},required:{type:Boolean,default:!1}},data:function(){return{imageUrl:\"\",file:null,uploading:!1}},methods:{uploadFile:function(){var e=this;if(this.uploading=!0,this.file=this.$refs.fileupload.files[0],null!=this.file){var t=new FormData;t.append(\"image\",this.file),f.a.post(\"/_system/php/functions/ftpupload.php\",t,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(t){console.log(t),t.data.success?(e.imageUrl=t.data.data,e.uploading=!1,e.$emit(\"saveUrl\",t.data.data)):console.log(\"Error in File Upload\")}).catch(function(e){console.error(e)})}}}},_=v,g=Object(l[\"a\"])(_,d,u,!1,null,null,null);g.options.__file=\"fileupload.vue\";var m,h,k=g.exports,b={components:{fileupload:k,stepper:c},data:function(){return{params:{},visible:!1}},methods:{toggle:function(){this.visible=!this.visible},show:function(e){this.visible=!0,this.params=e}}},w=b,C=(a(\"371d\"),Object(l[\"a\"])(w,m,h,!1,null,\"4da6ce68\",null));C.options.__file=\"modal.vue\";t[\"a\"]=C.exports},\"371d\":function(e,t,a){\"use strict\";var s=a(\"d1e8\"),i=a.n(s);i.a},\"43a5\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"padding\"},[a(\"div\",{staticClass:\"flex wide justify-space-between\"},[e._m(0),a(\"div\",[a(\"a\",{staticClass:\"padding\",class:{active:\"all\"==e.active},on:{click:function(t){e.active=\"all\"}}},[e._v(\"Bookings\")]),a(\"a\",{staticClass:\"padding\",class:{active:\"paid\"==e.active},on:{click:function(t){e.active=\"paid\"}}},[e._v(\"Paid\")]),a(\"a\",{staticClass:\"padding\",class:{active:\"overdue\"==e.active},on:{click:function(t){e.active=\"overdue\"}}},[e._v(\"Overdue\")])])]),a(\"table\",{staticClass:\"wide\"},e._l(e.filteredBookings,function(t){return a(\"tr\",[a(\"td\",[a(\"h3\",[e._v(e._s(t.account_name))]),a(\"h5\",[e._v(e._s(t.booking_status))])]),a(\"td\",[a(\"button\",{staticClass:\"float-right\",on:{click:function(a){e.$refs.booking.show(t)}}},[e._v(\"View\")])])])}),0),a(\"modal\",{ref:\"booking\",inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"transition\",{attrs:{name:\"fade\"}},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.visible,expression:\"visible\"}],staticClass:\"fixed-fill\",attrs:{id:\"backdrop\"},on:{click:e.toggle}})]),a(\"transition\",{attrs:{name:\"fade\"}},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.visible,expression:\"visible\"}],staticClass:\"card fixed-center flex column five-large seven-medium twelve-small max-high\",attrs:{id:\"modal\"}},[a(\"div\",{staticClass:\"flex justify-space-between align-center wide\"},[a(\"h2\",{staticClass:\"padding\"},[e._v(\"Booking Details\")]),a(\"a\",{staticClass:\"padding\",on:{click:e.toggle}},[a(\"fa\",{attrs:{icon:\"times\"}})],1)]),a(\"hr\"),a(\"div\",{staticClass:\"padding overflow-auto\"},[a(\"table\",{staticClass:\"wide\"},[a(\"tr\",[a(\"td\",[e._v(\"Booked on\")]),a(\"td\",[e._v(e._s(e.params.booking_created))])]),a(\"tr\",[a(\"td\",[e._v(\"Schedule\")]),a(\"td\",[e._v(e._s(e.params.booking_date)+\", \"+e._s(e.params.booking_time))])]),a(\"tr\",[a(\"td\",[e._v(\"Status\")]),a(\"td\",[e._v(e._s(e.params.booking_status))])]),\"BANK_DEPOSIT\"==e.params.payment_method?a(\"tr\",[a(\"td\",[e._v(\"Deposit Slip\")]),a(\"td\",[a(\"img\",{attrs:{src:e.params.booking_deposit_slip}})])]):a(\"tr\",[a(\"td\",[e._v(\"Payment Method\")]),a(\"td\",[e._v(\"Credit Card\")])])]),a(\"div\",{staticClass:\"flex wide\"},[\"COMPLETED\"!=e.params.booking_status?a(\"button\",{staticClass:\"flex-growBooking\",on:{click:function(t){e.$store.dispatch(\"cancelBooking\",e.params.booking_id),e.visible=!1}}},[e._v(\"Cancel Booking\")]):e._e(),\"AWAITING_CONFIRMATION\"==e.params.booking_status||\"AWAITING_PAYMENT\"==e.params.booking_status?a(\"button\",{staticClass:\"flex-grow margin-left-small primary\",on:{click:function(t){e.$store.dispatch(\"approveBooking\",e.params.booking_id),e.visible=!1}}},[e._v(\"Approve Booking\")]):e._e(),\"BOOKED\"==e.params.booking_status?a(\"button\",{staticClass:\"flex-grow margin-left-small primary\",on:{click:function(t){e.$store.dispatch(\"markAsCompleted\",e.params.booking_id),e.visible=!1}}},[e._v(\"Mark as Done\")]):e._e()]),a(\"form\",{staticClass:\"margin-top\"},[a(\"fieldset\",[a(\"details\",[a(\"summary\",[e._v(\"Package Details\")]),a(\"br\"),a(\"table\",{staticClass:\"wide\"},[a(\"tr\",[a(\"td\",[e._v(\"Package Name\")]),a(\"td\",[e._v(\"Fake Package 1\")])]),a(\"tr\",[a(\"td\",[e._v(\"Package Description\")]),a(\"td\",[e._v(\"Fake Description\")])]),a(\"tr\",[a(\"td\",[e._v(\"Duration\")]),a(\"td\",[e._v(\"30 fakes\")])]),a(\"tr\",[a(\"td\",[e._v(\"Addons\")]),a(\"td\")]),a(\"tr\",[a(\"td\",[e._v(\"Themes\")]),a(\"td\")]),a(\"tr\",[a(\"td\",[e._v(\"Total Price\")]),a(\"td\",[e._v(\"Php 00.00\")])])])])]),a(\"fieldset\",[a(\"details\",[a(\"summary\",[e._v(\"Reschedule\")]),a(\"div\",{staticClass:\"flex align-center\"}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.$parent.reschedule_date,expression:\"$parent.reschedule_date\"}],attrs:{type:\"date\"},domProps:{value:e.$parent.reschedule_date},on:{input:function(t){t.target.composing||e.$set(e.$parent,\"reschedule_date\",t.target.value)}}}),a(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.$parent.reschedule_slot,expression:\"$parent.reschedule_slot\"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t=\"_value\"in e?e._value:e.value;return t});e.$set(e.$parent,\"reschedule_slot\",t.target.multiple?a:a[0])}}},e._l(e.$parent.reschedule_slots,function(t){return a(\"option\",[e._v(e._s(t))])}),0),a(\"button\",{on:{click:function(t){t.preventDefault(),e.toggle(),e.$parent.reschedule()}}},[e._v(\"Reschedule\")])])])])])])])],1)},staticRenderFns:[]}})],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"h2\",[e._v(\"Bookings\")])])}],n=a(\"bc3a\"),o=a.n(n),l=a(\"2b18\"),r=a(\"f9d7\"),c={components:{modal:l[\"a\"],switcher:r[\"a\"]},mounted:function(){this.$store.dispatch(\"getAllBookings\")},data:function(){return{active:\"all\",reschedule_date:\"\",reschedule_slot:\"\",reschedule_slots:[]}},watch:{reschedule_date:function(){var e=this,t=new FormData;t.append(\"booking_date\",this.reschedule_date),console.log(this.$refs.booking.params.package),t.append(\"package_minutes\",JSON.parse(this.$refs.booking.params.package).package_minutes),o.a.post(\"/_system/php/api/booking/getOpenSlots.php\",t).then(function(t){if(!t.data.success)return console.error(t),[];e.reschedule_slots=t.data.data}).catch(function(e){return console.log(e),[]})}},methods:{reschedule:function(){var e=this,t=new FormData;t.append(\"booking_id\",this.$refs.booking.params.booking_id),t.append(\"booking_date\",this.reschedule_date),t.append(\"booking_time\",this.reschedule_slot),o.a.post(\"/_system/php/api/booking/reschedule.php\",t).then(function(t){if(!t.data.success)return console.error(t),[];e.$store.dispatch(\"getAllBookings\")}).catch(function(e){return console.log(e),[]})}},computed:{filteredBookings:function(){var e=this.$store.getters.allBookings;return\"all\"==this.active?e:\"paid\"==this.active?e.filter(function(e){return\"AWAITING_CONFIRMATION\"==e.booking_status}):\"overdue\"==this.active?e.filter(function(e){if(\"AWAITING_PAYMENT\"!=e.booking_status)return!1;var t=new Date(e.booking_created),a=new Date,s=a-t,i=s/36e5;return i>24}):void 0}}},d=c,u=a(\"2877\"),p=Object(u[\"a\"])(d,s,i,!1,null,null,null);p.options.__file=\"admin-bookings.vue\";t[\"default\"]=p.exports},\"4bfa\":function(e,t,a){},d1e8:function(e,t,a){},f9d7:function(e,t,a){\"use strict\";var s,i,n={data:function(){return{active:\"\"}}},o=n,l=(a(\"1f3e\"),a(\"2877\")),r=Object(l[\"a\"])(o,s,i,!1,null,\"7c25a286\",null);r.options.__file=\"switcher.vue\";t[\"a\"]=r.exports}}]);","extractedComments":[]}